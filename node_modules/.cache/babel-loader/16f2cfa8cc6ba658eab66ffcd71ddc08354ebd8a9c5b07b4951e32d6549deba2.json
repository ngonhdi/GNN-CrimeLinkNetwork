{"ast":null,"code":"import React,{useState,useRef}from\"react\";import NetworkGraph from\"../shared/NetworkGraph\";import ScanningOverlay from\"../shared/ScanningOverlay\";import TheoryExplainer from\"../shared/TheoryExplainer\";import AttentionVisualizer from\"../shared/AttentionVisualizer\";import{mockCrimes,relatedCrimes,detectiveCases,detectiveStoryCase}from\"../../data/mockData\";import{getRelatedCrimes}from\"../../data/relatedCrimesData\";/**\r\n * Enhanced Investigation Tab with Theory Explanations and Attention Visualization\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InvestigationTabEnhanced=_ref=>{let{selectedCrime,setSelectedCrime,isScanning,scanProgress,showResults,highlightedNodes,handleScan,graphNodes,graphEdges,setHighlightedNodes,setShowResults}=_ref;const[showTheory,setShowTheory]=useState(false);const[showAttention,setShowAttention]=useState(false);const[useDetectiveCase,setUseDetectiveCase]=useState(true);const[selectedDetectiveCase,setSelectedDetectiveCase]=useState(detectiveCases[0]);// Debounce ref to prevent double-click\nconst scanDebounceRef=useRef(false);// Use detective case or regular case\nconst currentCase=useDetectiveCase?selectedDetectiveCase:selectedCrime;const currentRelated=useDetectiveCase?getRelatedCrimes(selectedDetectiveCase.id):relatedCrimes;const handleDetectiveScan=()=>{// Prevent double-click\nif(scanDebounceRef.current||isScanning)return;scanDebounceRef.current=true;// Set the crime first\nsetSelectedCrime(detectiveStoryCase);// Pass the crime directly to handleScan to avoid state sync issues\nhandleScan(detectiveStoryCase);// Auto-show theory and attention after scan\nsetTimeout(()=>{setShowTheory(true);setShowAttention(true);},3000);// Reset debounce after 500ms\nsetTimeout(()=>{scanDebounceRef.current=false;},500);};const handleRegularScan=()=>{// Prevent double-click\nif(scanDebounceRef.current||isScanning||!selectedCrime)return;scanDebounceRef.current=true;handleScan(selectedCrime);// Reset debounce after 500ms\nsetTimeout(()=>{scanDebounceRef.current=false;},500);};return/*#__PURE__*/_jsxs(\"div\",{className:\"investigation-enhanced\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"panel-title\",children:\"\\uD83D\\uDD0D Ph\\xE2n t\\xEDch M\\u1EA1ng l\\u01B0\\u1EDBi T\\u1ED9i ph\\u1EA1m\"}),/*#__PURE__*/_jsx(\"div\",{className:\"panel-actions\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:useDetectiveCase,onChange:e=>setUseDetectiveCase(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-label\",children:useDetectiveCase?\"üìñ Ch·∫ø ƒë·ªô Minh h·ªça\":\"üìä Ch·∫ø ƒë·ªô Th√¥ng th∆∞·ªùng\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",children:[/*#__PURE__*/_jsx(NetworkGraph,{nodes:graphNodes,edges:graphEdges,highlightedNodes:highlightedNodes,onNodeClick:node=>{const crime=mockCrimes.find(c=>c.id===node.id);setSelectedCrime(crime);setHighlightedNodes([node.id]);setShowResults(false);}}),/*#__PURE__*/_jsx(ScanningOverlay,{isScanning:isScanning,progress:scanProgress})]}),useDetectiveCase&&/*#__PURE__*/_jsxs(\"div\",{className:\"case-selector-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"case-selector-label\",children:\"Ch\\u1ECDn lo\\u1EA1i v\\u1EE5 \\xE1n \\u0111\\u1EC3 ph\\xE2n t\\xEDch:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"case-selector-grid\",children:detectiveCases.map(caseItem=>/*#__PURE__*/_jsxs(\"button\",{className:\"case-selector-btn \".concat(selectedDetectiveCase.id===caseItem.id?\"active\":\"\"),onClick:()=>setSelectedDetectiveCase(caseItem),children:[/*#__PURE__*/_jsx(\"div\",{className:\"case-icon\",children:caseItem.icon}),/*#__PURE__*/_jsx(\"div\",{className:\"case-title\",children:caseItem.title}),/*#__PURE__*/_jsx(\"div\",{className:\"case-type\",children:caseItem.type})]},caseItem.id))})]}),useDetectiveCase&&/*#__PURE__*/_jsxs(\"div\",{className:\"detective-banner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"banner-icon\",children:selectedDetectiveCase.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner-content\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"V\\u1EE5 \\xE1n: \",selectedDetectiveCase.title]}),/*#__PURE__*/_jsx(\"p\",{children:selectedDetectiveCase.description})]}),/*#__PURE__*/_jsx(\"button\",{className:\"banner-btn\",onClick:handleDetectiveScan,children:\"\\uD83D\\uDD0D B\\u1EAFt \\u0111\\u1EA7u ph\\xE2n t\\xEDch\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"panel-title\",children:\"B\\u1EA3ng \\u0111i\\u1EC1u khi\\u1EC3n\"})}),useDetectiveCase?/*#__PURE__*/_jsxs(\"div\",{className:\"detective-case-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"case-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"case-badge urgent\",children:\"\\uD83D\\uDEA8 \\u01AFU TI\\xCAN\"}),/*#__PURE__*/_jsx(\"span\",{className:\"case-id\",children:selectedDetectiveCase.id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"case-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Lo\\u1EA1i:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:selectedDetectiveCase.type})]}),selectedDetectiveCase.vehicle&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Ph\\u01B0\\u01A1ng ti\\u1EC7n:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value luxury\",children:selectedDetectiveCase.vehicle})]}),selectedDetectiveCase.substance&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Ch\\u1EA5t:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value luxury\",children:selectedDetectiveCase.substance})]}),selectedDetectiveCase.items&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"T\\xE0i s\\u1EA3n:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:selectedDetectiveCase.items})]}),selectedDetectiveCase.weapon&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Hung kh\\xED:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:selectedDetectiveCase.weapon})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Gi\\xE1 tr\\u1ECB:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[\"$\",selectedDetectiveCase.value.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Th\\u1EDDi gian:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[selectedDetectiveCase.date,\" \",selectedDetectiveCase.time]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"\\u0110\\u1ECBa \\u0111i\\u1EC3m:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:selectedDetectiveCase.location})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"case-description\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCCB M\\xF4 t\\u1EA3:\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedDetectiveCase.description})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"M\\xE3 v\\u1EE5 \\xE1n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-field\",value:(selectedCrime===null||selectedCrime===void 0?void 0:selectedCrime.id)||\"\",placeholder:\"Click node ho\\u1EB7c nh\\u1EADp m\\xE3...\",onChange:e=>{const crime=mockCrimes.find(c=>c.id===e.target.value);if(crime)setSelectedCrime(crime);}}),selectedCrime&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-crime-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-label\",children:\"\\u0110\\xC3 CH\\u1ECCN\"}),/*#__PURE__*/_jsx(\"div\",{className:\"info-type\",children:selectedCrime.type}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-meta\",children:[\"Qu\\u1EADn \",selectedCrime.district,\" \\u2022 \",selectedCrime.date,\" \",selectedCrime.time]})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"scan-button\",onClick:useDetectiveCase?handleDetectiveScan:handleRegularScan,disabled:!currentCase||isScanning,children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z\"})}),isScanning?\"ƒêang qu√©t m·∫°ng l∆∞·ªõi...\":\"üîç Qu√©t Li√™n K·∫øt GNN\"]})]}),showResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"panel results-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"panel-title\",children:\"\\u26A1 K\\u1EBFt qu\\u1EA3 ph\\xE2n t\\xEDch\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-count\",children:[currentRelated.length,\" v\\u1EE5 \\xE1n li\\xEAn quan\"]})]}),currentRelated.map((crime,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"result-card enhanced\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"result-number\",children:[\"#\",idx+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"result-id\",children:crime.id}),/*#__PURE__*/_jsxs(\"span\",{className:\"similarity-badge high\",children:[(crime.similarity*100).toFixed(0),\"% Match\"]})]}),useDetectiveCase&&/*#__PURE__*/_jsxs(\"div\",{className:\"result-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-icon\",children:\"\\uD83D\\uDE97\"}),/*#__PURE__*/_jsx(\"span\",{children:crime.vehicle})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-icon\",children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsx(\"span\",{children:crime.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-icon\",children:\"\\u23F0\"}),/*#__PURE__*/_jsxs(\"span\",{children:[crime.date,\" \",crime.time]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"weight-bars\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"weight-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"weight-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"weight-icon\",children:\"\\uD83D\\uDCCD\"}),\"Spatial\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"weight-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"weight-fill spatial\",style:{width:\"\".concat(crime.spatialWeight*100,\"%\")},children:/*#__PURE__*/_jsxs(\"span\",{className:\"weight-value\",children:[(crime.spatialWeight*100).toFixed(0),\"%\"]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"weight-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"weight-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"weight-icon\",children:\"\\u23F0\"}),\"Temporal\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"weight-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"weight-fill temporal\",style:{width:\"\".concat(crime.temporalWeight*100,\"%\")},children:/*#__PURE__*/_jsxs(\"span\",{className:\"weight-value\",children:[(crime.temporalWeight*100).toFixed(0),\"%\"]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"weight-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"weight-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"weight-icon\",children:\"\\uD83C\\uDFF7\\uFE0F\"}),\"Semantic\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"weight-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"weight-fill semantic\",style:{width:\"\".concat(crime.semanticWeight*100,\"%\")},children:/*#__PURE__*/_jsxs(\"span\",{className:\"weight-value\",children:[(crime.semanticWeight*100).toFixed(0),\"%\"]})})})]})]})]},crime.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"insight-box detective\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"insight-title\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"})}),\"\\uD83C\\uDFAF K\\u1EBFt lu\\u1EADn \\u0111i\\u1EC1u tra\"]}),useDetectiveCase?/*#__PURE__*/_jsxs(\"p\",{className:\"insight-text\",children:[\"H\\u1EC7 th\\u1ED1ng ph\\xE1t hi\\u1EC7n \",/*#__PURE__*/_jsx(\"strong\",{style:{color:\"#e74c3c\"},children:\"23 v\\u1EE5 tr\\u1ED9m c\\u1EAFp xe cao c\\u1EA5p\"}),\" trong 30 ng\\xE0y, t\\u1EA1o th\\xE0nh m\\u1ED9t \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0111\\u01B0\\u1EDDng d\\xE2y t\\u1ED9i ph\\u1EA1m c\\xF3 t\\u1ED5 ch\\u1EE9c\"}),\" ho\\u1EA1t \\u0111\\u1ED9ng xuy\\xEAn 5 qu\\u1EADn huy\\u1EC7n.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"\\uD83D\\uDCCA M\\xF4 h\\xECnh: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:\"#f39c12\"},children:\"Di chuy\\u1EC3n theo tuy\\u1EBFn giao th\\xF4ng ch\\xEDnh\"}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u23F0 Th\\u1EDDi gian: 22h-24h (cao \\u0111i\\u1EC3m ho\\u1EA1t \\u0111\\u1ED9ng)\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uD83C\\uDFAF \\u0110\\u1ED1i t\\u01B0\\u1EE3ng: Xe sang tr\\u1ECB gi\\xE1 tr\\xEAn $80K\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uD83D\\uDD27 Th\\u1EE7 \\u0111o\\u1EA1n: V\\xF4 hi\\u1EC7u camera an ninh chuy\\xEAn nghi\\u1EC7p\"]}):/*#__PURE__*/_jsxs(\"p\",{className:\"insight-text\",children:[\"M\\u1EB7c d\\xF9 c\\xE1c v\\u1EE5 \\xE1n n\\xE0y c\\xE1ch nhau v\\xE0i ng\\xE0y v\\xE0 x\\u1EA3y ra \\u1EDF nh\\u1EEFng \\u0111\\u1ECBa \\u0111i\\u1EC3m kh\\xE1c nhau, h\\u1EC7 th\\u1ED1ng ph\\xE1t hi\\u1EC7n ra\",\" \",/*#__PURE__*/_jsx(\"strong\",{style:{color:\"#00f5d4\"},children:\"\\u0111\\u1EB7c \\u0111i\\u1EC3m ho\\u1EA1t \\u0111\\u1ED9ng t\\u01B0\\u01A1ng \\u0111\\u1ED3ng\"}),\". \\u0110\\xE2y l\\xE0 d\\u1EA5u hi\\u1EC7u c\\u1EE7a m\\u1ED9t\",\" \",/*#__PURE__*/_jsx(\"strong\",{style:{color:\"#f39c12\"},children:\"nh\\xF3m \\u0111\\u1ED1i t\\u01B0\\u1EE3ng l\\u01B0u \\u0111\\u1ED9ng\"}),\" \",\"ho\\u1EA1t \\u0111\\u1ED9ng xuy\\xEAn c\\xE1c qu\\u1EADn huy\\u1EC7n.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn primary\",onClick:()=>setShowTheory(!showTheory),children:[\"\\uD83D\\uDCDA \",showTheory?\"·∫®n\":\"Xem\",\" Gi\\u1EA3i th\\xEDch L\\xFD thuy\\u1EBFt\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn secondary\",onClick:()=>setShowAttention(!showAttention),children:[\"\\uD83E\\uDDE0 \",showAttention?\"·∫®n\":\"Xem\",\" Multi-Head Attention\"]})]})]})]}),showResults&&showTheory&&/*#__PURE__*/_jsx(\"div\",{className:\"theory-section\",children:/*#__PURE__*/_jsx(TheoryExplainer,{crimeData:currentCase,predictions:currentRelated})}),showResults&&showAttention&&/*#__PURE__*/_jsx(\"div\",{className:\"attention-section\",children:/*#__PURE__*/_jsx(AttentionVisualizer,{sourceCrime:currentCase,relatedCrimes:currentRelated.slice(0,3)})})]});};export default InvestigationTabEnhanced;","map":{"version":3,"names":["React","useState","useRef","NetworkGraph","ScanningOverlay","TheoryExplainer","AttentionVisualizer","mockCrimes","relatedCrimes","detectiveCases","detectiveStoryCase","getRelatedCrimes","jsx","_jsx","jsxs","_jsxs","InvestigationTabEnhanced","_ref","selectedCrime","setSelectedCrime","isScanning","scanProgress","showResults","highlightedNodes","handleScan","graphNodes","graphEdges","setHighlightedNodes","setShowResults","showTheory","setShowTheory","showAttention","setShowAttention","useDetectiveCase","setUseDetectiveCase","selectedDetectiveCase","setSelectedDetectiveCase","scanDebounceRef","currentCase","currentRelated","id","handleDetectiveScan","current","setTimeout","handleRegularScan","className","children","type","checked","onChange","e","target","nodes","edges","onNodeClick","node","crime","find","c","progress","map","caseItem","concat","onClick","icon","title","description","vehicle","substance","items","weapon","value","toLocaleString","date","time","location","placeholder","district","disabled","width","height","viewBox","fill","d","length","idx","similarity","toFixed","style","spatialWeight","temporalWeight","semanticWeight","color","crimeData","predictions","sourceCrime","slice"],"sources":["C:/Users/ADMIN/Downloads/crime-link-gnn/crime-link-gnn/src/components/tabs/InvestigationTabEnhanced.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport NetworkGraph from \"../shared/NetworkGraph\";\r\nimport ScanningOverlay from \"../shared/ScanningOverlay\";\r\nimport TheoryExplainer from \"../shared/TheoryExplainer\";\r\nimport AttentionVisualizer from \"../shared/AttentionVisualizer\";\r\nimport {\r\n  mockCrimes,\r\n  relatedCrimes,\r\n  detectiveCases,\r\n  detectiveStoryCase,\r\n} from \"../../data/mockData\";\r\nimport { getRelatedCrimes } from \"../../data/relatedCrimesData\";\r\n\r\n/**\r\n * Enhanced Investigation Tab with Theory Explanations and Attention Visualization\r\n */\r\nconst InvestigationTabEnhanced = ({\r\n  selectedCrime,\r\n  setSelectedCrime,\r\n  isScanning,\r\n  scanProgress,\r\n  showResults,\r\n  highlightedNodes,\r\n  handleScan,\r\n  graphNodes,\r\n  graphEdges,\r\n  setHighlightedNodes,\r\n  setShowResults,\r\n}) => {\r\n  const [showTheory, setShowTheory] = useState(false);\r\n  const [showAttention, setShowAttention] = useState(false);\r\n  const [useDetectiveCase, setUseDetectiveCase] = useState(true);\r\n  const [selectedDetectiveCase, setSelectedDetectiveCase] = useState(detectiveCases[0]);\r\n\r\n  // Debounce ref to prevent double-click\r\n  const scanDebounceRef = useRef(false);\r\n\r\n  // Use detective case or regular case\r\n  const currentCase = useDetectiveCase ? selectedDetectiveCase : selectedCrime;\r\n  const currentRelated = useDetectiveCase\r\n    ? getRelatedCrimes(selectedDetectiveCase.id)\r\n    : relatedCrimes;\r\n\r\n  const handleDetectiveScan = () => {\r\n    // Prevent double-click\r\n    if (scanDebounceRef.current || isScanning) return;\r\n    scanDebounceRef.current = true;\r\n\r\n    // Set the crime first\r\n    setSelectedCrime(detectiveStoryCase);\r\n    // Pass the crime directly to handleScan to avoid state sync issues\r\n    handleScan(detectiveStoryCase);\r\n\r\n    // Auto-show theory and attention after scan\r\n    setTimeout(() => {\r\n      setShowTheory(true);\r\n      setShowAttention(true);\r\n    }, 3000);\r\n\r\n    // Reset debounce after 500ms\r\n    setTimeout(() => {\r\n      scanDebounceRef.current = false;\r\n    }, 500);\r\n  };\r\n\r\n  const handleRegularScan = () => {\r\n    // Prevent double-click\r\n    if (scanDebounceRef.current || isScanning || !selectedCrime) return;\r\n    scanDebounceRef.current = true;\r\n\r\n    handleScan(selectedCrime);\r\n\r\n    // Reset debounce after 500ms\r\n    setTimeout(() => {\r\n      scanDebounceRef.current = false;\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <div className=\"investigation-enhanced\">\r\n      {/* Main panel with network graph */}\r\n      <div className=\"panel\">\r\n        <div className=\"panel-header\">\r\n          <h2 className=\"panel-title\">\r\n            üîç Ph√¢n t√≠ch M·∫°ng l∆∞·ªõi T·ªôi ph·∫°m\r\n          </h2>\r\n          <div className=\"panel-actions\">\r\n            <label className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={useDetectiveCase}\r\n                onChange={(e) => setUseDetectiveCase(e.target.checked)}\r\n              />\r\n              <span className=\"toggle-label\">\r\n                {useDetectiveCase ? \"üìñ Ch·∫ø ƒë·ªô Minh h·ªça\" : \"üìä Ch·∫ø ƒë·ªô Th√¥ng th∆∞·ªùng\"}\r\n              </span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"map-container\">\r\n          <NetworkGraph\r\n            nodes={graphNodes}\r\n            edges={graphEdges}\r\n            highlightedNodes={highlightedNodes}\r\n            onNodeClick={(node) => {\r\n              const crime = mockCrimes.find((c) => c.id === node.id);\r\n              setSelectedCrime(crime);\r\n              setHighlightedNodes([node.id]);\r\n              setShowResults(false);\r\n            }}\r\n          />\r\n          <ScanningOverlay isScanning={isScanning} progress={scanProgress} />\r\n        </div>\r\n\r\n        {/* Case selector */}\r\n        {useDetectiveCase && (\r\n          <div className=\"case-selector-container\">\r\n            <div className=\"case-selector-label\">Ch·ªçn lo·∫°i v·ª• √°n ƒë·ªÉ ph√¢n t√≠ch:</div>\r\n            <div className=\"case-selector-grid\">\r\n              {detectiveCases.map((caseItem) => (\r\n                <button\r\n                  key={caseItem.id}\r\n                  className={`case-selector-btn ${\r\n                    selectedDetectiveCase.id === caseItem.id ? \"active\" : \"\"\r\n                  }`}\r\n                  onClick={() => setSelectedDetectiveCase(caseItem)}\r\n                >\r\n                  <div className=\"case-icon\">{caseItem.icon}</div>\r\n                  <div className=\"case-title\">{caseItem.title}</div>\r\n                  <div className=\"case-type\">{caseItem.type}</div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Detective case info banner */}\r\n        {useDetectiveCase && (\r\n          <div className=\"detective-banner\">\r\n            <div className=\"banner-icon\">{selectedDetectiveCase.icon}</div>\r\n            <div className=\"banner-content\">\r\n              <h4>V·ª• √°n: {selectedDetectiveCase.title}</h4>\r\n              <p>{selectedDetectiveCase.description}</p>\r\n            </div>\r\n            <button className=\"banner-btn\" onClick={handleDetectiveScan}>\r\n              üîç B·∫Øt ƒë·∫ßu ph√¢n t√≠ch\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Control panel */}\r\n      <div className=\"control-panel\">\r\n        <div className=\"panel\">\r\n          <div className=\"panel-header\">\r\n            <h2 className=\"panel-title\">B·∫£ng ƒëi·ªÅu khi·ªÉn</h2>\r\n          </div>\r\n\r\n          {useDetectiveCase ? (\r\n            <div className=\"detective-case-card\">\r\n              <div className=\"case-header\">\r\n                <span className=\"case-badge urgent\">üö® ∆ØU TI√äN</span>\r\n                <span className=\"case-id\">{selectedDetectiveCase.id}</span>\r\n              </div>\r\n              <div className=\"case-details\">\r\n                <div className=\"detail-row\">\r\n                  <span className=\"detail-label\">Lo·∫°i:</span>\r\n                  <span className=\"detail-value\">{selectedDetectiveCase.type}</span>\r\n                </div>\r\n                {selectedDetectiveCase.vehicle && (\r\n                  <div className=\"detail-row\">\r\n                    <span className=\"detail-label\">Ph∆∞∆°ng ti·ªán:</span>\r\n                    <span className=\"detail-value luxury\">\r\n                      {selectedDetectiveCase.vehicle}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                {selectedDetectiveCase.substance && (\r\n                  <div className=\"detail-row\">\r\n                    <span className=\"detail-label\">Ch·∫•t:</span>\r\n                    <span className=\"detail-value luxury\">\r\n                      {selectedDetectiveCase.substance}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                {selectedDetectiveCase.items && (\r\n                  <div className=\"detail-row\">\r\n                    <span className=\"detail-label\">T√†i s·∫£n:</span>\r\n                    <span className=\"detail-value\">{selectedDetectiveCase.items}</span>\r\n                  </div>\r\n                )}\r\n                {selectedDetectiveCase.weapon && (\r\n                  <div className=\"detail-row\">\r\n                    <span className=\"detail-label\">Hung kh√≠:</span>\r\n                    <span className=\"detail-value\">{selectedDetectiveCase.weapon}</span>\r\n                  </div>\r\n                )}\r\n                <div className=\"detail-row\">\r\n                  <span className=\"detail-label\">Gi√° tr·ªã:</span>\r\n                  <span className=\"detail-value\">\r\n                    ${selectedDetectiveCase.value.toLocaleString()}\r\n                  </span>\r\n                </div>\r\n                <div className=\"detail-row\">\r\n                  <span className=\"detail-label\">Th·ªùi gian:</span>\r\n                  <span className=\"detail-value\">\r\n                    {selectedDetectiveCase.date} {selectedDetectiveCase.time}\r\n                  </span>\r\n                </div>\r\n                <div className=\"detail-row\">\r\n                  <span className=\"detail-label\">ƒê·ªãa ƒëi·ªÉm:</span>\r\n                  <span className=\"detail-value\">\r\n                    {selectedDetectiveCase.location}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"case-description\">\r\n                <strong>üìã M√¥ t·∫£:</strong>\r\n                <p>{selectedDetectiveCase.description}</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"input-group\">\r\n              <label className=\"input-label\">M√£ v·ª• √°n</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"input-field\"\r\n                value={selectedCrime?.id || \"\"}\r\n                placeholder=\"Click node ho·∫∑c nh·∫≠p m√£...\"\r\n                onChange={(e) => {\r\n                  const crime = mockCrimes.find((c) => c.id === e.target.value);\r\n                  if (crime) setSelectedCrime(crime);\r\n                }}\r\n              />\r\n              {selectedCrime && (\r\n                <div className=\"selected-crime-info\">\r\n                  <div className=\"info-label\">ƒê√É CH·ªåN</div>\r\n                  <div className=\"info-type\">{selectedCrime.type}</div>\r\n                  <div className=\"info-meta\">\r\n                    Qu·∫≠n {selectedCrime.district} ‚Ä¢ {selectedCrime.date}{\" \"}\r\n                    {selectedCrime.time}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <button\r\n            className=\"scan-button\"\r\n            onClick={useDetectiveCase ? handleDetectiveScan : handleRegularScan}\r\n            disabled={!currentCase || isScanning}\r\n          >\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <path d=\"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z\" />\r\n            </svg>\r\n            {isScanning ? \"ƒêang qu√©t m·∫°ng l∆∞·ªõi...\" : \"üîç Qu√©t Li√™n K·∫øt GNN\"}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Results panel */}\r\n        {showResults && (\r\n          <div className=\"panel results-panel\">\r\n            <div className=\"panel-header\">\r\n              <h2 className=\"panel-title\">\r\n                ‚ö° K·∫øt qu·∫£ ph√¢n t√≠ch\r\n              </h2>\r\n              <div className=\"result-count\">\r\n                {currentRelated.length} v·ª• √°n li√™n quan\r\n              </div>\r\n            </div>\r\n\r\n            {currentRelated.map((crime, idx) => (\r\n              <div key={crime.id} className=\"result-card enhanced\">\r\n                <div className=\"result-header\">\r\n                  <span className=\"result-number\">#{idx + 1}</span>\r\n                  <span className=\"result-id\">{crime.id}</span>\r\n                  <span className=\"similarity-badge high\">\r\n                    {(crime.similarity * 100).toFixed(0)}% Match\r\n                  </span>\r\n                </div>\r\n\r\n                {useDetectiveCase && (\r\n                  <div className=\"result-details\">\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-icon\">üöó</span>\r\n                      <span>{crime.vehicle}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-icon\">üìç</span>\r\n                      <span>{crime.location}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-icon\">‚è∞</span>\r\n                      <span>\r\n                        {crime.date} {crime.time}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"weight-bars\">\r\n                  <div className=\"weight-item\">\r\n                    <div className=\"weight-label\">\r\n                      <span className=\"weight-icon\">üìç</span>\r\n                      Spatial\r\n                    </div>\r\n                    <div className=\"weight-bar\">\r\n                      <div\r\n                        className=\"weight-fill spatial\"\r\n                        style={{ width: `${crime.spatialWeight * 100}%` }}\r\n                      >\r\n                        <span className=\"weight-value\">\r\n                          {(crime.spatialWeight * 100).toFixed(0)}%\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"weight-item\">\r\n                    <div className=\"weight-label\">\r\n                      <span className=\"weight-icon\">‚è∞</span>\r\n                      Temporal\r\n                    </div>\r\n                    <div className=\"weight-bar\">\r\n                      <div\r\n                        className=\"weight-fill temporal\"\r\n                        style={{ width: `${crime.temporalWeight * 100}%` }}\r\n                      >\r\n                        <span className=\"weight-value\">\r\n                          {(crime.temporalWeight * 100).toFixed(0)}%\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"weight-item\">\r\n                    <div className=\"weight-label\">\r\n                      <span className=\"weight-icon\">üè∑Ô∏è</span>\r\n                      Semantic\r\n                    </div>\r\n                    <div className=\"weight-bar\">\r\n                      <div\r\n                        className=\"weight-fill semantic\"\r\n                        style={{ width: `${crime.semanticWeight * 100}%` }}\r\n                      >\r\n                        <span className=\"weight-value\">\r\n                          {(crime.semanticWeight * 100).toFixed(0)}%\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            {/* Insight box */}\r\n            <div className=\"insight-box detective\">\r\n              <div className=\"insight-title\">\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\" />\r\n                </svg>\r\n                üéØ K·∫øt lu·∫≠n ƒëi·ªÅu tra\r\n              </div>\r\n              {useDetectiveCase ? (\r\n                <p className=\"insight-text\">\r\n                  H·ªá th·ªëng ph√°t hi·ªán <strong style={{ color: \"#e74c3c\" }}>23 v·ª• tr·ªôm c·∫Øp xe cao c·∫•p</strong> trong\r\n                  30 ng√†y, t·∫°o th√†nh m·ªôt <strong>ƒë∆∞·ªùng d√¢y t·ªôi ph·∫°m c√≥ t·ªï ch·ª©c</strong> ho·∫°t ƒë·ªông xuy√™n 5 qu·∫≠n huy·ªán.\r\n                  <br />\r\n                  <br />\r\n                  üìä M√¥ h√¨nh: <strong style={{ color: \"#f39c12\" }}>\r\n                    Di chuy·ªÉn theo tuy·∫øn giao th√¥ng ch√≠nh\r\n                  </strong>\r\n                  <br />\r\n                  ‚è∞ Th·ªùi gian: 22h-24h (cao ƒëi·ªÉm ho·∫°t ƒë·ªông)\r\n                  <br />\r\n                  üéØ ƒê·ªëi t∆∞·ª£ng: Xe sang tr·ªã gi√° tr√™n $80K\r\n                  <br />\r\n                  üîß Th·ªß ƒëo·∫°n: V√¥ hi·ªáu camera an ninh chuy√™n nghi·ªáp\r\n                </p>\r\n              ) : (\r\n                <p className=\"insight-text\">\r\n                  M·∫∑c d√π c√°c v·ª• √°n n√†y c√°ch nhau v√†i ng√†y v√† x·∫£y ra ·ªü nh·ªØng ƒë·ªãa ƒëi·ªÉm kh√°c nhau,\r\n                  h·ªá th·ªëng ph√°t hi·ªán ra{\" \"}\r\n                  <strong style={{ color: \"#00f5d4\" }}>\r\n                    ƒë·∫∑c ƒëi·ªÉm ho·∫°t ƒë·ªông t∆∞∆°ng ƒë·ªìng\r\n                  </strong>\r\n                  . ƒê√¢y l√† d·∫•u hi·ªáu c·ªßa m·ªôt{\" \"}\r\n                  <strong style={{ color: \"#f39c12\" }}>nh√≥m ƒë·ªëi t∆∞·ª£ng l∆∞u ƒë·ªông</strong>{\" \"}\r\n                  ho·∫°t ƒë·ªông xuy√™n c√°c qu·∫≠n huy·ªán.\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Action buttons */}\r\n            <div className=\"result-actions\">\r\n              <button\r\n                className=\"action-btn primary\"\r\n                onClick={() => setShowTheory(!showTheory)}\r\n              >\r\n                üìö {showTheory ? \"·∫®n\" : \"Xem\"} Gi·∫£i th√≠ch L√Ω thuy·∫øt\r\n              </button>\r\n              <button\r\n                className=\"action-btn secondary\"\r\n                onClick={() => setShowAttention(!showAttention)}\r\n              >\r\n                üß† {showAttention ? \"·∫®n\" : \"Xem\"} Multi-Head Attention\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Theory Explainer (conditional) */}\r\n      {showResults && showTheory && (\r\n        <div className=\"theory-section\">\r\n          <TheoryExplainer crimeData={currentCase} predictions={currentRelated} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Attention Visualizer (conditional) */}\r\n      {showResults && showAttention && (\r\n        <div className=\"attention-section\">\r\n          <AttentionVisualizer\r\n            sourceCrime={currentCase}\r\n            relatedCrimes={currentRelated.slice(0, 3)}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvestigationTabEnhanced;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}